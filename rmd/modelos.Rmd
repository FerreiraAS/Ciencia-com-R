# **Modelos** {#modelos}

<br>

## Modelos estatísticos

<br>

### O que é modelagem estatística?

-   Modelagem é o processo de usar dados para selecionar um modelo matemático explícito que represente o processo gerador dos dados.[@Greenland1989]

<br>

### Por que a escolha do modelo é complexa?

- Há inúmeras combinações possíveis de variáveis, formas funcionais (lineares, quadráticas, transformações), interações e formas do desfecho, o que torna o espaço de possibilidades muito amplo.[@Greenland1989]

<br>

::: {.infobox .Rlogo data-latex="{images/Rlogo}"}
O pacote *equatiomatic*[@equatiomatic] fornece a função [*extract_eq*](https://www.rdocumentation.org/packages/equatiomatic/versions/0.3.1/topics/extract_eq) para extrair a equação dos modelos em formato LaTeX para visualização.
:::

<br>

## Suposições dos modelos

<br>

### Quais suposições são feitas para modelagem?

-   .[@REF]

<br>

### Como avaliar as suposições de um modelo?

-   .[@REF]

<br>

::: {.infobox .Rlogo data-latex="{images/Rlogo}"}
O pacote *performance*[@performance] fornece a função [*check_model*](https://www.rdocumentation.org/packages/performance/versions/0.10.4/topics/check_model) para analisar a colinearidade entre variáveis, a normalidade da distribuição das variáveis e a heteroscedasticidade.
:::

<br>

## Avaliação de modelos

<br>

### Como avaliar a qualidade de ajuste de um modelo?

- .[@REF]

<br>

```{r metricas-ajuste, echo = FALSE, warning = FALSE, message = FALSE, appendix = TRUE, fig.align = 'center', results = "asis", fig.fullwidth = TRUE}
# Reprodutibilidade
set.seed(123)

# Modelo
dados <- data.frame(x = rnorm(100, 5, 2),
                    y = 3 + 1.5 * rnorm(100, 5, 2) + rnorm(100))
modelo <- lm(y ~ x, data = dados)

# Resultado
resultado <- performance::model_performance(modelo)

# Reestruturando para exibir como "Métrica | Valor"
resultado_df <- as.data.frame(t(resultado)) # transpor para linhas
resultado_df$Métrica <- rownames(resultado_df)
colnames(resultado_df)[1] <- "Valor"
rownames(resultado_df) <- NULL
resultado_df <- resultado_df[, c("Métrica", "Valor")]

# Formatando os valores numéricos
resultado_df$Valor <- formatC(
  resultado_df$Valor,
  format = "f",
  digits = 3,
  big.mark = ",",
  decimal.mark = "."
)

resultado_df$Métrica <- dplyr::recode(
  resultado_df$Métrica,
  AIC = "AIC",
  AICc = "AIC corrigido",
  BIC = "BIC",
  R2 = "$R^2$",
  R2_adjusted = "$R^2$ ajustado",
  RMSE = "Erro quadrático médio (RMSE)",
  Sigma = "Desvio residual (Sigma)"
)

# Exibindo com estilo avançado
kableExtra::kable(
  resultado_df,
  align = "c",
  format = ifelse(knitr::is_html_output(), "html", "latex"),
  booktabs = TRUE,
  linesep = "",
  escape = FALSE,
  caption = "Métricas de desempenho do modelo de regressão linear."
) %>%
  kableExtra::kable_styling(
    latex_options = c("basic"),
    bootstrap_options = c("basic", "hover", "condensed", "responsive"),
    full_width = ifelse(knitr::is_html_output(), TRUE, TRUE),
    position = "center"
  ) %>%
  kableExtra::row_spec(0, bold = TRUE, extra_css = "border-top: 1px solid; border-bottom: 1px solid") %>%
  kableExtra::column_spec(1, bold = TRUE) %>%
  kableExtra::row_spec(nrow(resultado_df), extra_css = "border-bottom: 1px solid")
```

<br>

::: {.infobox .Rlogo data-latex="{images/Rlogo}"}
O pacote *performance*[@performance] fornece a função [*model_performance*](https://www.rdocumentation.org/packages/performance/versions/0.10.4/topics/model_performance) para calcular as métricas de ajuste da regressão adequadas ao modelo pré-especificado.
:::

<br>

::: {.infobox .Rlogo data-latex="{images/Rlogo}"}
O pacote *performance*[@performance] fornece a função [*compare_performance*](https://www.rdocumentation.org/packages/performance/versions/0.10.4/topics/compare_performance) para comparar o desempenho e a qualidade do ajuste de diversos modelos de regressão pré-especificados.
:::

<br>

## Modelos estocásticos

<br>

### O que são modelos estocásticos?

-   .[@REF]

<br>

### O que são cadeias de Markov?

-   .[@REF]

<br>

### Como construir uma cadeia de Markov?

-   [@REF]

<br>

::: {.infobox .Rlogo data-latex="{images/Rlogo}"}
O pacote *markovchain*[@markovchain] fornece a função [*markovchainFit*](https://www.rdocumentation.org/packages/markovchain/versions/0.9.5/topics/createSequenceMatrix) ajusta uma cadeia com base em dados observados.
:::

<br>

## Comparação de modelos

<br>

### Como comparar modelos de aprendizagem de máquina?

-   .[@REF]

<br>

::: {.infobox .Rlogo data-latex="{images/Rlogo}"}
O pacote *correctR*[@correctR] fornece funções para comparar o desempenho e a qualidade do ajuste de diversos modelos de aprendizagem de máquina em amostras correlacionadas.
:::

<br>

```{r, echo=FALSE, warning=FALSE, results='asis', eval=knitr::is_html_output()}
cat(readLines("citation.html"), sep = "\n")
```

<br>
